<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CS Matrix — Campaign Support Matrix</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="theme-dark">
  <header>
    <div id="global-meters-header" class="global-meters" aria-label="Global meters">
      <div class="meter-row">
        <div class="meter-controls">Collapse: <button id="global-minus-collapse" aria-label="Decrease Collapse meter">-</button> <span id="global-meter-collapse-value">0</span> <button id="global-plus-collapse" aria-label="Increase Collapse meter">+</button></div>
        <div class="meter-bars" id="ctrl-meter-collapse"></div>
      </div>
      <div class="meter-row">
        <div class="meter-controls">Influence: <button id="global-minus-influence" aria-label="Decrease Influence meter">-</button> <span id="global-meter-influence-value">0</span> <button id="global-plus-influence" aria-label="Increase Influence meter">+</button></div>
        <div class="meter-bars" id="ctrl-meter-influence"></div>
      </div>
      <div class="meter-row">
        <div class="meter-controls">Record: <button id="global-minus-record" aria-label="Decrease Record meter">-</button> <span id="global-meter-record-value">0</span> <button id="global-plus-record" aria-label="Increase Record meter">+</button></div>
        <div class="meter-bars" id="ctrl-meter-record"></div>
      </div>
    </div>
    <!-- HUD toggle moved into the canvas wrapper so it doesn't appear near meters -->
  </header>
  <div id="app-error" class="app-error hidden" role="alert" aria-live="polite">Application: Graph initialization failed — check browser console for details.</div>
  <main>
    <section id="matrix">
      <div class="graph-heading">
        <!-- In-graph HUD toggle removed to avoid duplicate hide buttons and overlaying meters -->
      </div>
      <div class="control-row controls-toggle-row hide-desktop" style="margin-bottom:8px;">
        <button id="btn-toggle-controls" aria-label="Show or hide controls">Show Controls</button>
      </div>
      <div class="control-row controls-max-row">
        <button id="btn-maximize" aria-label="Maximize graph area" class="hide-mobile">Maximize Graph</button>
      </div>
      <div id="matrix-canvas-wrap">
        <svg id="matrix-svg" width="100%" viewBox="0 0 1200 1200" preserveAspectRatio="xMidYMid meet"></svg>
        <button id="btn-toggle-hud" aria-label="Toggle HUD and meters" class="hud-toggle" aria-pressed="false">Hide HUD</button>
        <button id="btn-posture" aria-label="Toggle compact posture" class="posture-toggle" aria-pressed="false">Posture</button>
        <!-- axis pills outside the chart boundaries -->
        <div class="axis-pill axis-pill-top" id="axis-top">Carte Blanche (+6)</div>
        <div class="axis-pill axis-pill-bottom" id="axis-bottom">Surveillance (-6)</div>
        <div class="axis-pill axis-pill-left" id="axis-left">Distrust (-6)</div>
        <div class="axis-pill axis-pill-right" id="axis-right">Trust (+6)</div>
      </div>
    </section>
    <aside id="controls">
      <h3>Controls <button id="btn-hide-controls" aria-label="Close controls" class="hide-desktop">Close</button></h3>
      <div class="control-row">
        <button id="btn-add-node" aria-label="Add a new node">Add Node</button>
        <button id="btn-delete" aria-label="Delete selected node">Delete Selected</button>
      </div>
      <div class="control-row">
        <label for="density-select">Layout density:</label>
        <select id="density-select" aria-label="Layout density control">
          <option value="compact">Compact (more graph)</option>
          <option value="normal">Normal</option>
          <option value="spacious">Spacious (more padding)</option>
        </select>
      </div>
      <!-- Randomize removed to keep simplified UI -->
      <div class="control-row">
        <input type="file" id="import-file" accept="application/json" />
        <button id="btn-export" aria-label="Export graph as JSON">Export JSON</button>
        <button id="btn-reset" aria-label="Reset graph to sample">Reset</button>
      </div>
        <!-- Global meters moved to header for always-visible access -->
      <div class="panels">
        <div id="node-panel" class="panel hidden">
          <h4>Node</h4>
          <label>Name: <input id="node-name" /></label>
          <label>Trust (X): <input id="node-x" type="range" min="-6" max="6" step="1" /> <span id="node-x-val">0</span></label>
          <div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-bottom:8px;"><span>Distrust (-6)</span><span>Trust (+6)</span></div>
          <label>Carte Blanche / Surveillance (Y): <input id="node-y" type="range" min="-6" max="6" step="1" /> <span id="node-y-val">0</span></label>
          <div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-bottom:8px;"><span>Carte Blanche (+6)</span><span>Surveillance (-6)</span></div>
          <label>Color: <input id="node-color" type="color" /></label>
          <!-- per-node meters removed; use global meters in Controls instead -->
          <div class="panel-actions">
            <button id="btn-save-node">Save</button>
            <button id="btn-cancel-node">Cancel</button>
          </div>
        </div>
        <!-- Edge UI removed -->
      </div>
    </aside>
  </main>
  <section id="node-list-section">
    <h3>Nodes</h3>
    <div id="node-list" class="node-list" aria-live="polite"></div>
  </section>
  <footer>
    <small>Generated by a new scaffold — run `npm start` in this folder to preview.</small>
  </footer>
  <script type="module" src="main.js"></script>
</body>
</html>
